# Copy this file to config/default.toml and customise for your setup.
# Run `aigent onboard` to have the wizard fill it in interactively.

[agent]
name = "Aigent"
user_name = ""
workspace_path = "./workspace"
thinking_level = "balanced"

[llm]
provider = "ollama"
ollama_model = "llama3.1:8b"
openrouter_model = "openai/gpt-4o-mini"
ollama_local_first = true
ollama_base_url = "http://localhost:11434"

[memory]
backend = "eventlog"
auto_sleep_minutes = 120
auto_sleep_turn_interval = 6
auto_sleep_mode = "nightly"
night_sleep_start_hour = 22
night_sleep_end_hour = 6
core_rewrite_requires_approval = true
multi_agent_sleep_batch_size = 60
# Maximum entries per tier in the YAML vault KV summaries (core, user-profile, reflective).
kv_tier_limit = 15
# IANA timezone for the nightly sleep window. Examples: "America/New_York", "Europe/Berlin".
timezone = "UTC"
# Remove low-confidence Episodic entries older than N days during the sleep cycle.
# Set to 0 to disable lightweight forgetting.
forget_episodic_after_days = 0
forget_min_confidence = 0.30

# Proactive mode: set proactive_interval_minutes > 0 to enable.
# The daemon will periodically check whether it has something worth proactively
# sharing with the user (a follow-up, reminder, or insight).
proactive_interval_minutes = 0
# Do-not-disturb window in local time.  Proactive messages are suppressed
# between dnd_start and dnd_end (inclusive of both sides of midnight wrap).
proactive_dnd_start_hour = 22
proactive_dnd_end_hour = 8
# Minimum gap (minutes) between sent proactive messages.
# Prevents bursts even when the check interval is short.
proactive_cooldown_minutes = 5
# Maximum number of current beliefs injected into each conversation prompt.
# Beliefs are sorted by composite score (confidence × recency × valence) before truncation.
# 0 = unlimited (use with care on long-running agents).
max_beliefs_in_prompt = 5

[safety]
approval_required = true
allow_shell = false
allow_wasm = false
# Per-tool allow-list (empty = all tools are permitted subject to capability gates).
tool_allowlist = []
# Per-tool deny-list (takes precedence over tool_allowlist).
tool_denylist = []
# Tools that bypass interactive approval even when approval_required = true.
# The four safe built-in tools are exempt by default.
approval_exempt_tools = ["calendar_add_event", "remind_me", "draft_email", "web_search"]

# ── Tool trust & action config ───────────────────────────────────────────────
[tools]
# How aggressively the agent asks for permission before running tools.
#
#   safer      — every tool requires interactive approval (great for first-time
#                use or when the workspace contains sensitive files)
#   balanced   — read-only tools (read_file, web_search, remind_me,
#                calendar_add_event, git_rollback) run freely; write_file,
#                run_shell, and draft_email require approval  ← DEFAULT
#   autonomous — no approval prompts (still workspace-sandboxed and deny-listed)
#
# The legacy [safety] approval_required flag is ignored when this is not "safer".
approval_mode = "balanced"

# Brave Search API key.  When non-empty the web_search tool uses the Brave
# Search REST API instead of DuckDuckGo Instant Answers.
# Can also be set via the BRAVE_API_KEY environment variable.
# Get a free key at https://api.search.brave.com/app/
brave_api_key = ""

# Automatically git-commit workspace changes after every successful write_file
# or run_shell tool call.  Requires git to be installed.
# (The workspace will be git-init'd automatically during onboarding if this is true.)
git_auto_commit = false

# Apply platform-level process sandboxing to `run_shell` children.
# Requires the binary to have been compiled with the `sandbox` feature (default).
# Set to false to disable sandboxing at runtime without recompiling.
sandbox_enabled = true


log_level = "info"

[onboarding]
completed = false

[integrations]
telegram_enabled = false

[daemon]
socket_path = "/tmp/aigent.sock"

# ── Git integration (gait) ──────────────────────────────────────────────────────────
[git]
# Repository URLs considered trusted for push / commit identity.
trusted_repos = ["https://github.com/danielmriley/aigent"]
# Absolute paths where git write ops are allowed.
# workspace_path and the Aigent source dir are always auto-added at runtime.
trusted_write_paths = []
# Allow read-only git ops (status, log, diff, blame, ls-remote) on any repo.
# Set to false in "safer" mode to restrict reads to trusted_write_paths only.
allow_system_read = true
